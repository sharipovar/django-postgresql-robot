## Установка

1. Установить [PostgreSQL](https://www.postgresql.org/download/)
2. Установить [Python](https://www.python.org/downloads/)
3. Установить [Django](https://www.djangoproject.com/download/)
   ```
   pip install Django --upgrade
   ```
4. Установить [psycopg2](https://www.psycopg.org/install/)
   ```
   pip install psycopg2 --upgrade
   ```
## Django

1. Создать проект Django:
   ```
   django-admin startproject mysite
   ```

   подробнее описано здесь: https://docs.djangoproject.com/en/4.1/intro/tutorial01/
2. Создать таблицы для проекта в PostgreSQL:
   ```
   python manage.py migrate
   ```

   подробнее описано здесь: https://docs.djangoproject.com/en/4.1/ref/databases/#postgresql-notes
3. Создать приложение Django:
   ```
   python manage.py startapp blog
   ```

   подробнее здесь: https://docs.djangoproject.com/en/4.1/intro/tutorial01/#creating-the-polls-app
4. Создать миграции из моделей:
   ```
   python manage.py makemigrations blog
   ```

   - Проверить SQL-запрос создания таблиц можно с помощью:
      ```
      python manage.py sqlmigrate blog 0001
      ```
      Вывод:
      ```
      BEGIN;
      --
      -- Create model Topic
      --
      CREATE TABLE "blog_topic" ("id" bigint NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "topic_name" varchar(200) NOT NULL);
      --
      -- Create model User
      --
      CREATE TABLE "blog_user" ("id" bigint NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, "user_name" varchar(200) NOT NULL);
      --
      -- Create model Message
      --
      CREATE TABLE "blog_message" (
         "id" bigint NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY, 
         "text" varchar(200) NOT NULL, 
         "created_at" timestamp with time zone NOT NULL, 
         "topic_id" bigint NOT NULL, 
         "user_id" bigint NOT NULL
      );
      ALTER TABLE "blog_message" 
         ADD CONSTRAINT "blog_message_topic_id_2274fc68_fk_blog_topic_id" FOREIGN KEY ("topic_id") 
         REFERENCES "blog_topic" ("id") DEFERRABLE INITIALLY DEFERRED;
      ALTER TABLE "blog_message" 
         ADD CONSTRAINT "blog_message_user_id_542063a6_fk_blog_user_id" FOREIGN KEY ("user_id") 
         REFERENCES "blog_user" ("id") DEFERRABLE INITIALLY DEFERRED;
      CREATE INDEX "blog_message_topic_id_2274fc68" ON "blog_message" ("topic_id");
      CREATE INDEX "blog_message_user_id_542063a6" ON "blog_message" ("user_id");
      COMMIT;
      ```

   - Дополнительная проверка:
     ```
     python manage.py check
     ```

   - Проверка интерфейса (API) в интерактивном режиме:
     ```
     python manage.py shell
     ```

     Пример:
     ```
     In [1]: from blog.models import User, Topic, Message

     In [2]: User.objects.all()
     Out[2]: <QuerySet []>

     In [3]: from django.utils import timezone

     In [4]: u = User(user_name="A")

     In [5]: u.save()

     In [6]: u.id
     Out[6]: 1

     In [7]: User.objects.all()
     Out[7]: <QuerySet [<User: User object (1)>]>
     ```